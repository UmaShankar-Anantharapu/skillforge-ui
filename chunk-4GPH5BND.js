import{a as V}from"./chunk-RHIDNPXY.js";import{a as z}from"./chunk-DLKHAUBB.js";import{a as U}from"./chunk-6IVOECSG.js";import{a as B}from"./chunk-64L2S6SH.js";import{a as C}from"./chunk-S4NOV2JS.js";import{a as E}from"./chunk-RKDYL6WK.js";import{a as G}from"./chunk-4P6MEVON.js";import"./chunk-IBACMLWD.js";import{Da as d,Ea as D,K as I,Kb as O,L as v,Lb as F,Ma as n,N as P,Na as t,Oa as T,Pa as w,Qa as L,R as k,Rb as N,S as h,Ub as A,Xa as g,eb as _,fb as i,fc as H,gb as x,hb as m,hc as S,ib as M,ma as l,na as p,sb as j,ub as R,wb as b,za as f}from"./chunk-2627VUCO.js";var Y=(()=>{class e{constructor(o){this.api=o}list(){return this.api.get("/roadmap/recommendations/list")}static{this.\u0275fac=function(r){return new(r||e)(P(G))}}static{this.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function X(e,s){if(e&1&&(w(0),n(1,"ul")(2,"li")(3,"strong"),i(4,"Skill:"),t(),i(5),t(),n(6,"li")(7,"strong"),i(8,"Level:"),t(),i(9),t(),n(10,"li")(11,"strong"),i(12,"Daily:"),t(),i(13),t(),n(14,"li")(15,"strong"),i(16,"Goal:"),t(),i(17),t()(),L()),e&2){let o=g();l(5),m(" ",o.profile.skill,""),l(4),m(" ",o.profile.level,""),l(4),m(" ",o.profile.dailyTime," mins"),l(4),m(" ",o.profile.goal,"")}}function Z(e,s){e&1&&(n(0,"p"),i(1,"Complete your "),n(2,"a",18),i(3,"onboarding"),t(),i(4,"."),t())}function ee(e,s){if(e&1&&(n(0,"div",19)(1,"p")(2,"strong"),i(3,"Rank:"),t(),i(4),t(),n(5,"p")(6,"strong"),i(7,"Points:"),t(),i(8),t(),n(9,"a",20),i(10,"View Leaderboard"),t()()),e&2){let o=g();l(4),m(" #",o.leaderboardPosition.rank,""),l(4),m(" ",o.leaderboardPosition.points,"")}}function te(e,s){e&1&&(n(0,"div",19)(1,"p"),i(2,"Complete lessons to earn points and appear on the leaderboard!"),t()())}function ie(e,s){if(e&1&&(n(0,"div",24)(1,"div",25),i(2,"\u{1F3C6}"),t(),n(3,"div",26)(4,"strong"),i(5),t(),n(6,"p"),i(7),t(),n(8,"small"),i(9),j(10,"date"),t()()()),e&2){let o=s.$implicit;l(5),x(o.name),l(2),x(o.description),l(2),x(R(10,3,o.earnedAt,"shortDate"))}}function ne(e,s){if(e&1&&(n(0,"div",21),f(1,ie,11,6,"div",22),n(2,"a",23),i(3,"View All Badges"),t()()),e&2){let o=g();l(),d("ngForOf",o.recentBadges)}}function oe(e,s){e&1&&(n(0,"p"),i(1,"Complete lessons and challenges to earn badges!"),t())}function re(e,s){if(e&1&&(n(0,"li"),i(1),t()),e&2){let o=s.$implicit;l(),x(o.message)}}function ae(e,s){if(e&1&&(n(0,"div",6)(1,"h3"),i(2,"Recommendations"),t(),n(3,"ul"),f(4,re,2,1,"li",27),t()()),e&2){let o=g();l(4),d("ngForOf",o.recommendations)}}var $=(()=>{class e{constructor(o,r,a,c,u,q){this.auth=o,this.profileService=r,this.progressService=a,this.recsService=c,this.badgesService=u,this.leaderboardService=q,this.user=null,this.profile=null,this.progressPercent=0,this.streakDays=0,this.recommendations=[],this.recentBadges=[],this.leaderboardPosition=null}ngOnInit(){this.user=this.auth.getUser();let o=this.user?.id;o&&(this.profileService.getProfile(o).subscribe({next:r=>{this.profile=r.profile},error:()=>{this.profile=null}}),this.progressService.list().subscribe({next:r=>{let a=r.progress.filter(u=>u.status==="completed").length,c=Math.max(a,7);this.progressPercent=Math.round(a/c*100),this.streakDays=a}}),this.recsService.list().subscribe({next:r=>{this.recommendations=r.recommendations}}),this.badgesService.list().subscribe({next:r=>{this.recentBadges=r.badges.sort((a,c)=>new Date(c.earnedAt).getTime()-new Date(a.earnedAt).getTime()).slice(0,3)}}),this.leaderboardService.fetch().subscribe({next:r=>{o&&(this.leaderboardPosition=r.leaderboard.find(a=>a.userId===o)||null)}}))}static{this.\u0275fac=function(r){return new(r||e)(p(E),p(C),p(V),p(Y),p(U),p(z))}}static{this.\u0275cmp=k({type:e,selectors:[["app-home"]],decls:42,vars:12,consts:[["noProfile",""],["noBadges",""],[1,"sf-container"],[1,"grid","grid-3"],[1,"sf-card",2,"grid-column","1/-1"],[1,"sub"],[1,"sf-card"],[4,"ngIf","ngIfElse"],[2,"width","100%","background","rgba(255,255,255,0.1)","border-radius","6px","overflow","hidden","height","12px"],[2,"background","var(--sf-accent)","height","100%"],[2,"margin-top","8px"],[2,"display","flex","gap","12px","flex-wrap","wrap"],["routerLink","/skills",1,"sf-btn"],["routerLink","/lesson/angular-1",1,"sf-btn"],["routerLink","/challenges",1,"sf-btn"],["class","leaderboard-position",4,"ngIf"],["class","badges-container",4,"ngIf","ngIfElse"],["class","sf-card",4,"ngIf"],["routerLink","/onboarding",1,"sf-link"],[1,"leaderboard-position"],["routerLink","/leaderboard",1,"sf-link"],[1,"badges-container"],["class","badge-item",4,"ngFor","ngForOf"],["routerLink","/badges",1,"sf-link"],[1,"badge-item"],[1,"badge-icon"],[1,"badge-details"],[4,"ngFor","ngForOf"]],template:function(r,a){if(r&1&&(n(0,"div",2)(1,"div",3)(2,"div",4)(3,"h2"),i(4),t(),n(5,"p",5),i(6,"Keep up your daily streak and reach your goal"),t()(),n(7,"div",6)(8,"h3"),i(9,"Profile"),t(),f(10,X,18,4,"ng-container",7)(11,Z,5,0,"ng-template",null,0,b),t(),n(13,"div",6)(14,"h3"),i(15,"Progress"),t(),n(16,"div",8),T(17,"div",9),t(),n(18,"p",10),i(19),t()(),n(20,"div",6)(21,"h3"),i(22,"Actions"),t(),n(23,"div",11)(24,"a",12),i(25,"View Skills"),t(),n(26,"a",13),i(27,"Today's Lesson"),t(),n(28,"a",14),i(29,"Challenges"),t()()(),n(30,"div",6)(31,"h3"),i(32,"Gamification"),t(),f(33,ee,11,2,"div",15)(34,te,3,0,"div",15),t(),n(35,"div",6)(36,"h3"),i(37,"Recent Badges"),t(),f(38,ne,4,1,"div",16)(39,oe,2,0,"ng-template",null,1,b),t(),f(41,ae,5,1,"div",17),t()()),r&2){let c=_(12),u=_(40);l(4),m("Welcome",a.user?", "+a.user.name:"",""),l(6),d("ngIf",a.profile&&a.profile.onboardingComplete)("ngIfElse",c),l(7),D("width",a.progressPercent,"%"),l(2),M("",a.progressPercent,"% completed \u2022 Streak: ",a.streakDays," days"),l(14),d("ngIf",a.leaderboardPosition),l(),d("ngIf",!a.leaderboardPosition),l(4),d("ngIf",a.recentBadges.length)("ngIfElse",u),l(3),d("ngIf",a.recommendations.length)}},dependencies:[O,F,H,N],styles:[".leaderboard-position[_ngcontent-%COMP%]{margin-top:8px}.badges-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.badge-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px;padding:8px;background:#ffffff0d;border-radius:6px}.badge-icon[_ngcontent-%COMP%]{font-size:24px;min-width:40px;height:40px;display:flex;align-items:center;justify-content:center;background:#ffffff1a;border-radius:50%}.badge-details[_ngcontent-%COMP%]{flex:1}.badge-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0;font-size:14px}.badge-details[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:var(--sf-text-secondary)}"]})}}return e})();var le=[{path:"",component:$,canActivate:[B]}],W=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=h({type:e})}static{this.\u0275inj=v({imports:[S.forChild(le),S]})}}return e})();var Pe=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=h({type:e})}static{this.\u0275inj=v({imports:[A,W]})}}return e})();export{Pe as DashboardModule};
