import{a as O}from"./chunk-IO3ZRV72.js";import{a as z}from"./chunk-IRV7PH2R.js";import{t as A,u as N}from"./chunk-S4RC2NXX.js";import{Da as a,K as h,Kb as k,L as v,Lb as E,Ma as s,Mb as P,N as C,Na as n,Nb as M,Pa as I,Qa as b,R as S,S as y,Sa as _,Ub as F,Va as g,W as d,X as m,Xa as l,cc as T,fb as c,fc as V,gb as x,hb as w,hc as j,ib as L,ma as r,na as u,za as f}from"./chunk-2627VUCO.js";var Q=(()=>{class t{constructor(e){this.api=e}getLesson(e){return this.api.get(`/lesson/${e}`)}generateLesson(e){return this.api.post("/lesson/generate",e)}static{this.\u0275fac=function(i){return new(i||t)(C(z))}}static{this.\u0275prov=h({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function B(t,p){if(t&1&&(s(0,"div")(1,"h3"),c(2),n(),s(3,"p"),c(4),n()()),t&2){let e=l(2);r(2),x(e.lesson.content.title),r(2),x(e.lesson.content.body)}}function G(t,p){if(t&1){let e=_();s(0,"label",11)(1,"input",12),g("change",function(){let o=d(e).index,D=l(3);return m(D.select(o))}),n(),c(2),n()}if(t&2){let e=p.$implicit;r(2),w(" ",e," ")}}function H(t,p){if(t&1){let e=_();s(0,"div")(1,"h3"),c(2,"Quiz"),n(),s(3,"p"),c(4),n(),s(5,"div",8),f(6,G,3,1,"label",9),n(),s(7,"div",10)(8,"button",6),g("click",function(){d(e);let o=l(2);return m(o.submitQuiz())}),c(9,"Submit"),n()()()}if(t&2){let e=l(2);r(4),x(e.lesson.content.question),r(2),a("ngForOf",e.lesson.content.options)}}function J(t,p){t&1&&(s(0,"div")(1,"p"),c(2,"Code lesson placeholder"),n()())}function K(t,p){if(t&1){let e=_();s(0,"div",1)(1,"div",2)(2,"h2"),c(3),n(),I(4,3),f(5,B,5,2,"div",4)(6,H,10,2,"div",4)(7,J,3,0,"div",4),b(),s(8,"div",5)(9,"button",6),g("click",function(){d(e);let o=l();return m(o.markCompleted())}),c(10,"Mark Completed"),n(),s(11,"a",7),c(12,"Back to Skills"),n()()()()}if(t&2){let e=l();r(3),L("",e.lesson.skill," \u2022 ",e.lesson.difficulty,""),r(),a("ngSwitch",e.lesson.type),r(),a("ngSwitchCase","text"),r(),a("ngSwitchCase","quiz"),r(),a("ngSwitchCase","code")}}var q=(()=>{class t{constructor(e,i,o){this.route=e,this.lessons=i,this.progress=o,this.lesson=null,this.selectedIndex=null}ngOnInit(){let e=this.route.snapshot.paramMap.get("id");e&&this.lessons.getLesson(e).subscribe({next:i=>this.lesson=i.lesson})}select(e){this.selectedIndex=e}submitQuiz(){if(!this.lesson)return;let e=typeof this.lesson.content?.answer=="number"?this.lesson.content.answer:-1,i=this.selectedIndex===e?100:0,o=Array.isArray(this.lesson.concepts)?this.lesson.concepts[0]:void 0;this.progress.upsert({lessonId:this.lesson.lessonId,status:"completed",score:i,concept:o}).subscribe()}markCompleted(){if(!this.lesson)return;let e=Array.isArray(this.lesson.concepts)?this.lesson.concepts[0]:void 0;this.progress.upsert({lessonId:this.lesson.lessonId,status:"completed",score:100,concept:e}).subscribe()}static{this.\u0275fac=function(i){return new(i||t)(u(T),u(Q),u(O))}}static{this.\u0275cmp=S({type:t,selectors:[["app-lesson-page"]],decls:1,vars:1,consts:[["class","sf-container",4,"ngIf"],[1,"sf-container"],[1,"sf-card"],[3,"ngSwitch"],[4,"ngSwitchCase"],[2,"margin-top","12px","display","flex","gap","12px"],[1,"sf-btn",3,"click"],["routerLink","/skills",1,"sf-link"],[1,"grid"],["class","sf-card","style","padding:12px;",4,"ngFor","ngForOf"],[2,"margin-top","12px"],[1,"sf-card",2,"padding","12px"],["type","radio","name","ans",3,"change"]],template:function(i,o){i&1&&f(0,K,13,6,"div",0),i&2&&a("ngIf",o.lesson)},dependencies:[k,E,P,M,V]})}}return t})();var U=[{path:":id",component:q}],oe=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=y({type:t})}static{this.\u0275inj=v({imports:[F,A,N,j.forChild(U)]})}}return t})();export{oe as LessonModule};
