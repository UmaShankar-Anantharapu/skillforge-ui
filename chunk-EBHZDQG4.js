import{a as p}from"./chunk-IBACMLWD.js";import{H as i,K as o,N as a,Wb as u,f as n,h as r}from"./chunk-2627VUCO.js";var d=(()=>{class s{constructor(t){this.http=t,this.apiUrl=`${p.apiUrl}/onboarding`,this.currentSessionSubject=new r(""),this.onboardingStatusSubject=new r(null),this.overlayOpenSubject=new r(!1),this.currentSession$=this.currentSessionSubject.asObservable(),this.onboardingStatus$=this.onboardingStatusSubject.asObservable(),this.overlayOpen$=this.overlayOpenSubject.asObservable()}startOnboarding(t){let e=t?{sessionId:t}:{};return this.http.post(`${this.apiUrl}/start`,e).pipe(i(l=>{this.currentSessionSubject.next(l.profile.sessionId)}))}getStepConfiguration(t){return this.http.get(`${this.apiUrl}/step/${t}`)}saveStepData(t,e){return this.http.post(`${this.apiUrl}/step/${t}`,e)}getSkillSuggestions(t){return this.http.post(`${this.apiUrl}/skills/suggest`,t)}getSubSkills(t){return this.http.post(`${this.apiUrl}/skills/subskills`,t)}completeOnboarding(t){return this.http.post(`${this.apiUrl}/complete`,{sessionId:t})}getOnboardingStatus(){return this.http.get(`${this.apiUrl}/status`).pipe(i(t=>{this.onboardingStatusSubject.next(t),this.currentSessionSubject.next(t.sessionId)}))}resetOnboarding(){return this.http.delete(`${this.apiUrl}/reset`).pipe(i(()=>{this.currentSessionSubject.next(""),this.onboardingStatusSubject.next(null)}))}needsOnboarding(){return new n(t=>{this.getOnboardingStatus().subscribe({next:e=>{t.next(!e.isComplete),t.complete()},error:e=>{t.next(!0),t.complete()}})})}getCurrentSessionId(){return this.currentSessionSubject.value}setCurrentSessionId(t){this.currentSessionSubject.next(t)}clearSession(){this.currentSessionSubject.next(""),this.onboardingStatusSubject.next(null)}openOverlay(){this.overlayOpenSubject.next(!0)}closeOverlay(){this.overlayOpenSubject.next(!1)}static{this.\u0275fac=function(e){return new(e||s)(a(u))}}static{this.\u0275prov=o({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();export{d as a};
