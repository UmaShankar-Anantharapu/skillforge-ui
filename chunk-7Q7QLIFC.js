import{a as x,e as b,i as P,t as E}from"./chunk-S4RC2NXX.js";import{Da as S,Ea as v,Kb as T,L as f,Ma as n,Na as r,R as h,S as _,Ub as M,Va as d,Wb as w,fb as a,gb as u,hc as k,kb as c,lb as m,ma as p,mb as g,na as y,za as C}from"./chunk-2627VUCO.js";function N(o,R){if(o&1&&(n(0,"div",1)(1,"strong"),a(2),r(),n(3,"p"),a(4),r()()),o&2){let e=R.$implicit;v("background",e.role==="user"?"var(--sf-card)":"var(--sf-surface)"),p(2),u(e.role==="user"?"You":"Tutor"),p(2),u(e.content)}}var F=(()=>{class o{constructor(e){this.http=e,this.draft="",this.messages=[],this.code="console.log('Hello SkillForge')",this.output=""}send(){if(!this.draft.trim())return;let e=this.draft.trim();this.messages.push({role:"user",content:e}),this.draft="",this.http.post("http://localhost:5050/api/tutor/ask",{message:e,history:this.messages}).subscribe({next:i=>this.messages.push({role:"assistant",content:i.reply}),error:()=>this.messages.push({role:"assistant",content:"Error contacting tutor."})})}voice(){let e=window.webkitSpeechRecognition||window.SpeechRecognition;if(!e)return alert("Speech recognition not supported");let i=new e;i.lang="en-US",i.onresult=t=>{let s=t.results[0][0].transcript;this.draft=s},i.start()}run(){this.http.post("http://localhost:5050/api/runner/node",{code:this.code}).subscribe({next:e=>{this.output=(e.stdout||"")+(e.stderr?`
`+e.stderr:"")},error:()=>{this.output="Run failed"}})}static{this.\u0275fac=function(i){return new(i||o)(y(w))}}static{this.\u0275cmp=h({type:o,selectors:[["app-tutor-page"]],decls:22,vars:4,consts:[[1,"sf-container"],[1,"sf-card"],[2,"display","flex","gap","12px","margin-bottom","12px"],["placeholder","Ask anything...",1,"sf-input",3,"ngModelChange","keyup.enter","ngModel"],[1,"sf-btn",3,"click"],[1,"material-icons"],[1,"grid",2,"max-height","420px","overflow","auto"],["class","sf-card",3,"background",4,"ngFor","ngForOf"],[1,"sf-card",2,"margin-top","16px"],["rows","6","placeholder","console.log('Hello')",1,"sf-input",3,"ngModelChange","ngModel"],[2,"margin-top","8px","display","flex","gap","12px"],[2,"white-space","pre-wrap"]],template:function(i,t){i&1&&(n(0,"div",0)(1,"div",1)(2,"h2"),a(3,"AI Tutor"),r(),n(4,"div",2)(5,"input",3),g("ngModelChange",function(l){return m(t.draft,l)||(t.draft=l),l}),d("keyup.enter",function(){return t.send()}),r(),n(6,"button",4),d("click",function(){return t.send()}),a(7,"Send"),r(),n(8,"button",4),d("click",function(){return t.voice()}),n(9,"span",5),a(10,"mic"),r()()(),n(11,"div",6),C(12,N,5,4,"div",7),r()(),n(13,"div",8)(14,"h3"),a(15,"Run Code (Node)"),r(),n(16,"textarea",9),g("ngModelChange",function(l){return m(t.code,l)||(t.code=l),l}),r(),n(17,"div",10)(18,"button",4),d("click",function(){return t.run()}),a(19,"Run"),r()(),n(20,"pre",11),a(21),r()()()),i&2&&(p(5),c("ngModel",t.draft),p(7),S("ngForOf",t.messages),p(4),c("ngModel",t.code),p(5),u(t.output))},dependencies:[T,x,b,P]})}}return o})();var W=[{path:"",component:F}],V=(()=>{class o{static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275mod=_({type:o})}static{this.\u0275inj=f({imports:[M,E,k.forChild(W)]})}}return o})();export{V as TutorModule};
