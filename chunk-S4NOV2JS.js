import{a as f}from"./chunk-RKDYL6WK.js";import{a as c}from"./chunk-4P6MEVON.js";import{F as n,K as u,N as p,m as l}from"./chunk-2627VUCO.js";var d=(()=>{class s{constructor(e,r){this.api=e,this.authService=r}upsertProfile(e){return this.api.post("/profile",e)}getProfile(e){return this.api.get(`/profile/${e}`)}getUserSkills(e){return this.getProfile(e).pipe(l(r=>r.profile.currentSkills||[]))}getCurrentUserProfile(){let e=this.authService.getUser();if(!e)throw new Error("User not authenticated");return this.getProfile(e.id).pipe(l(r=>r.profile))}getCurrentUserSkills(){let e=this.authService.getUser();if(!e)throw new Error("User not authenticated");return this.getUserSkills(e.id)}updateSkill(e,r){return this.getProfile(e).pipe(l(i=>{let t=i.profile,o=t.currentSkills.findIndex(a=>a.skillName===r.skillName);return o>=0?t.currentSkills[o]=r:t.currentSkills.push(r),t}),n(i=>this.upsertProfile(i)))}getSkillDetails(e){return this.api.get(`/skills/details/${encodeURIComponent(e)}`)}addSkillToProfile(e,r){return this.updateSkill(e,r)}removeSkillFromProfile(e,r){return this.getProfile(e).pipe(l(i=>{let t=i.profile;return t.currentSkills=t.currentSkills.filter(o=>o.skillName!==r),t}),n(i=>this.upsertProfile(i)))}static{this.\u0275fac=function(r){return new(r||s)(p(c),p(f))}}static{this.\u0275prov=u({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();export{d as a};
